--- a/output/frameworks_av/b0276006-d65f1d80-85a07450/services@audioflinger@MelReporter.no_comments_mergebot.h
+++ b/output/frameworks_av/b0276006-d65f1d80-85a07450/services@audioflinger@MelReporter.no_comments_truth.h
@@ -6 +5,0 @@
-#include <mutex>
@@ -25,2 +24,2 @@ public:
-            const sp<DeviceHalInterface>& device)
-    void activateInternalSoundDoseComputation()
+            const sp<DeviceHalInterface>& device) EXCLUDES_MelReporter_Mutex;
+    void activateInternalSoundDoseComputation() EXCLUDES_MelReporter_Mutex;
@@ -29,0 +29 @@ public:
+            EXCLUDES_MelReporter_Mutex;
@@ -30,0 +31 @@ public:
+            EXCLUDES_MelReporter_Mutex;
@@ -33 +34,5 @@ public:
-    void onReleaseAudioPatch(audio_patch_handle_t handle) final
+            EXCLUDES_AudioFlinger_Mutex;
+    void onReleaseAudioPatch(audio_patch_handle_t handle) final EXCLUDES_AudioFlinger_Mutex;
+    void onUpdateAudioPatch(audio_patch_handle_t oldHandle,
+                            audio_patch_handle_t newHandle,
+            const IAfPatchPanel::Patch& patch) final EXCLUDES_AudioFlinger_Mutex;
@@ -35,0 +41 @@ public:
+            EXCLUDES_AudioFlinger_Mutex;
@@ -46,7 +52,2 @@ audio_utils::mutex& mutex() const RETURN_CAPABILITY(audio_utils::MelReporter_Mut
-    audio_utils::mutex& mutex() const { return mMutex; }
-                                   GUARDED_BY(mutex()) = false;
-public:
-void onUpdateAudioPatch(audio_patch_handle_t oldHandle,
-                            audio_patch_handle_t newHandle,
-            const IAfPatchPanel::Patch& patch) finalprivate:
-void startMelComputationForActivePatch_l(const ActiveMelPatch& patch) GUARDED_BY(mutex()) = false;
+    void stopMelComputationForPatch_l(const ActiveMelPatch& patch) REQUIRES(mutex());
+    void startMelComputationForActivePatch_l(const ActiveMelPatch& patch) REQUIRES(mutex());
@@ -54,2 +55,2 @@ std::optional<audio_patch_handle_t>
-    activePatchStreamHandle_l(audio_io_handle_t streamHandle) GUARDED_BY(mutex()) = false;
-bool useHalSoundDoseInterface_l() GUARDED_BY(mutex()) = false;
+    activePatchStreamHandle_l(audio_io_handle_t streamHandle) REQUIRES(mutex());
+    bool useHalSoundDoseInterface_l() REQUIRES(mutex());
@@ -60,2 +61,2 @@ sp<SoundDoseManager> mSoundDoseManager;
-                                   GUARDED_BY(mutex()) = false;
-std::unordered_map<audio_port_handle_t, int> mActiveDevices GUARDED_BY(mutex()) = false;
+            GUARDED_BY(mutex());
+    std::unordered_map<audio_port_handle_t, int> mActiveDevices GUARDED_BY(mutex());
