--- a/output/frameworks_av/e8496e8f-05101a67-46b20158/services@audioflinger@IAfThread.no_comments_mergebot.h
+++ b/output/frameworks_av/e8496e8f-05101a67-46b20158/services@audioflinger@IAfThread.no_comments_truth.h
@@ -17 +16,0 @@
-#include <utils/Mutex.h>
@@ -45 +43,0 @@ public:
-<<<<<<< HEAD
@@ -48,6 +46,2 @@ public:
-||||||| 46b20158b2
-    virtual Mutex& mutex() const = 0;
-=======
-    virtual audio_utils::mutex& mutex() const = 0;
->>>>>>> 05101a67
-virtual bool isNonOffloadableGlobalEffectEnabled_l() const EXCLUDES_AudioFlinger_ClientMutex = 0;
+    virtual bool isNonOffloadableGlobalEffectEnabled_l() const
+            REQUIRES(mutex()) = 0;
@@ -56,0 +51 @@ virtual bool isNonOffloadableGlobalEffectEnabled_l() const EXCLUDES_AudioFlinger
+            REQUIRES(mutex()) = 0;
@@ -57,0 +53 @@ virtual bool isNonOffloadableGlobalEffectEnabled_l() const EXCLUDES_AudioFlinger
+            REQUIRES(mutex()) = 0;
@@ -58,0 +55 @@ virtual bool isNonOffloadableGlobalEffectEnabled_l() const EXCLUDES_AudioFlinger
+            REQUIRES(mutex()) = 0;
@@ -59,0 +57 @@ virtual bool isNonOffloadableGlobalEffectEnabled_l() const EXCLUDES_AudioFlinger
+            REQUIRES(mutex()) = 0;
@@ -64,0 +63 @@ virtual bool isAudioPolicyReady() const = 0;
+            REQUIRES(mutex()) = 0;
@@ -69,0 +69,4 @@ virtual sp<IAudioManager> getOrCreateAudioManager() = 0;
+            EXCLUDES_AudioFlinger_Mutex = 0;
+    virtual status_t moveEffectChain_ll(audio_session_t sessionId,
+            IAfPlaybackThread* srcThread, IAfPlaybackThread* dstThread)
+            REQUIRES(mutex(), audio_utils::ThreadBase_Mutex) = 0;
@@ -71,0 +75 @@ virtual sp<IAudioManager> getOrCreateAudioManager() = 0;
+            REQUIRES(mutex()) = 0;
@@ -77,0 +82 @@ virtual sp<IAudioManager> getOrCreateAudioManager() = 0;
+            EXCLUDES_AudioFlinger_Mutex = 0;
@@ -80,2 +85,2 @@ virtual sp<IAudioManager> getOrCreateAudioManager() = 0;
-            pid_t pid = 0)
-    virtual void onNonOffloadableGlobalEffectEnable()
+            pid_t pid = 0) EXCLUDES_AudioFlinger_ClientMutex = 0;
+    virtual void onNonOffloadableGlobalEffectEnable() EXCLUDES_AudioFlinger_Mutex = 0;
@@ -84,2 +89 @@ virtual sp<IAudioManager> getOrCreateAudioManager() = 0;
-    virtual status_t moveEffectChain_ll(audio_session_t sessionId,
-            IAfPlaybackThread* srcThread, IAfPlaybackThread* dstThread)
+            EXCLUDES_AudioFlinger_ClientMutex = 0;
@@ -176 +179,0 @@ static std::string formatToString(audio_format_t format);
-    virtual void stopMelComputation_l()
@@ -195,0 +199,2 @@ static std::string formatToString(audio_format_t format);
+    virtual status_t addEffect_ll(const sp<IAfEffectModule>& effect)
+            REQUIRES(audio_utils::AudioFlinger_Mutex, mutex()) = 0;
@@ -222,0 +228,4 @@ static std::string formatToString(audio_format_t format);
+    virtual void startMelComputation_l(const sp<audio_utils::MelProcessor>& processor)
+            REQUIRES(audio_utils::AudioFlinger_Mutex) = 0;
+    virtual void stopMelComputation_l()
+            REQUIRES(audio_utils::AudioFlinger_Mutex) = 0;
