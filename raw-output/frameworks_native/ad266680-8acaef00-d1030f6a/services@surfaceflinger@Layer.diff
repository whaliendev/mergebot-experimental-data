diff --git a/output/frameworks_native/ad266680-8acaef00-d1030f6a/services@surfaceflinger@Layer.no_comments_mergebot.cpp b/output/frameworks_native/ad266680-8acaef00-d1030f6a/services@surfaceflinger@Layer.no_comments_truth.cpp
index 5874e9d..0a38e01 100644
--- a/output/frameworks_native/ad266680-8acaef00-d1030f6a/services@surfaceflinger@Layer.no_comments_mergebot.cpp
+++ b/output/frameworks_native/ad266680-8acaef00-d1030f6a/services@surfaceflinger@Layer.no_comments_truth.cpp
@@ -30,2 +29,0 @@
-#include "clz.h"
-#include "RenderEngine/RenderEngine.h"
@@ -60 +58 @@ Layer::Layer(SurfaceFlinger* flinger, const sp<Client>& client, const String8& n
-        mBE{
+        mBE{this, name.string()} {
@@ -98,116405 +96,4 @@ Layer::Layer(SurfaceFlinger* flinger, const sp<Client>& client, const String8& n
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-Layer::~Layer() {
-    sp<Client> c(mClientRef.promote());
-    if (c != 0) {
-        c->detachLayer(this);
-    }
-    for (auto& point : mRemoteSyncPoints) {
-        point->setTransactionApplied();
-    }
-    for (auto& point : mLocalSyncPoints) {
-        point->setFrameAvailable();
-    }
-    mFrameTracker.logAndResetStats(mName);
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
-    }
-}
-void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-<<<<<<< HEAD
-    if (!hasHwcLayer(displayId)) {
-        return;
-    }
-||||||| d1030f6a7d
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
-    }
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
+Layer::~Layer() {
+    sp<Client> c(mClientRef.promote());
+    if (c != 0) {
+        c->detachLayer(this);
@@ -116504,4 +101,2 @@ void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
->>>>>>> 8acaef00
-=======
-    if (!hasHwcLayer(hwcId)) {
-        return;
+    for (auto& point : mRemoteSyncPoints) {
+        point->setTransactionApplied();
@@ -116509,16 +104,2 @@ void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
->>>>>>> 8acaef00
-    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
-    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
-    const Rect& frame = hwcInfo.displayFrame;
-    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
-    const FloatRect& crop = hwcInfo.sourceCrop;
-    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
-    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
-    layerInfo->set_hwc_transform(transform);
-    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
-    layerInfo->set_hwc_composition_type(compositionType);
-    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
-        static_cast<BufferLayer*>(this)->isProtected()) {
-        layerInfo->set_is_protected(true);
-    } else {
-        layerInfo->set_is_protected(false);
+    for (auto& point : mLocalSyncPoints) {
+        point->setFrameAvailable();
@@ -116525,0 +107 @@ void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
+    mFrameTracker.logAndResetStats(mName);
@@ -116862 +444,2 @@ void Layer::draw(const RenderArea& renderArea, bool useIdentityTransform) {
-void Layer::clearWithOpenGL(const RenderArea& renderArea, float red, float green, float blue, float alpha) const {
+void Layer::clearWithOpenGL(const RenderArea& renderArea, float red, float green, float blue,
+                            float alpha) const {
@@ -116909 +492,3 @@ bool Layer::addSyncPoint(const std::shared_ptr<SyncPoint>& point) {
-void Layer::computeGeometry(const RenderArea& renderArea, renderengine::Mesh& mesh, bool useIdentityTransform) const {
+void Layer::computeGeometry(const RenderArea& renderArea,
+                            renderengine::Mesh& mesh,
+                            bool useIdentityTransform) const {
@@ -117116 +701,2 @@ bool Layer::setChildLayer(const sp<Layer>& childLayer, int32_t z) {
-bool Layer::setChildRelativeLayer(const sp<Layer>& childLayer, const sp<IBinder>& relativeToHandle, int32_t relativeZ) {
+bool Layer::setChildRelativeLayer(const sp<Layer>& childLayer,
+        const sp<IBinder>& relativeToHandle, int32_t relativeZ) {
@@ -117210 +796,2 @@ bool Layer::setColor(const half3& color) {
-bool Layer::setMatrix(const layer_state_t::matrix22_t& matrix, bool allowNonRectPreservingTransforms) {
+bool Layer::setMatrix(const layer_state_t::matrix22_t& matrix,
+        bool allowNonRectPreservingTransforms) {
@@ -117277,0 +865,9 @@ uint32_t Layer::getLayerStack() const {
+void Layer::deferTransactionUntil_legacy(const sp<Layer>& barrierLayer, uint64_t frameNumber) {
+    mCurrentState.barrierLayer_legacy = barrierLayer;
+    mCurrentState.frameNumber_legacy = frameNumber;
+    mCurrentState.modified = true;
+    pushPendingState();
+    mCurrentState.barrierLayer_legacy = nullptr;
+    mCurrentState.frameNumber_legacy = 0;
+    mCurrentState.modified = false;
+}
@@ -117429 +1025,2 @@ void Layer::onDisconnect() {
-void Layer::addAndGetFrameTimestamps(const NewFrameEventsEntry* newTimestamps, FrameEventHistoryDelta* outDelta) {
+void Layer::addAndGetFrameTimestamps(const NewFrameEventsEntry* newTimestamps,
+                                     FrameEventHistoryDelta* outDelta) {
@@ -117544 +1141,2 @@ bool Layer::usingRelativeZ(LayerVector::StateSet stateSet) {
-__attribute__((no_sanitize("unsigned-integer-overflow"))) LayerVector Layer::makeTraversalList(LayerVector::StateSet stateSet, bool* outSkipRelativeZUsers) {
+__attribute__((no_sanitize("unsigned-integer-overflow"))) LayerVector Layer::makeTraversalList(
+        LayerVector::StateSet stateSet, bool* outSkipRelativeZUsers) {
@@ -117593 +1191,2 @@ void Layer::traverseInZOrder(LayerVector::StateSet stateSet, const LayerVector::
-void Layer::traverseInReverseZOrder(LayerVector::StateSet stateSet, const LayerVector::Visitor& visitor) {
+void Layer::traverseInReverseZOrder(LayerVector::StateSet stateSet,
+                                    const LayerVector::Visitor& visitor) {
@@ -117616 +1215,2 @@ void Layer::traverseInReverseZOrder(LayerVector::StateSet stateSet, const LayerV
-LayerVector Layer::makeChildrenTraversalList(LayerVector::StateSet stateSet, const std::vector<Layer*>& layersInTree) {
+LayerVector Layer::makeChildrenTraversalList(LayerVector::StateSet stateSet,
+                                             const std::vector<Layer*>& layersInTree) {
@@ -117639 +1239,3 @@ LayerVector Layer::makeChildrenTraversalList(LayerVector::StateSet stateSet, con
-void Layer::traverseChildrenInZOrderInner(const std::vector<Layer*>& layersInTree, LayerVector::StateSet stateSet, const LayerVector::Visitor& visitor) {
+void Layer::traverseChildrenInZOrderInner(const std::vector<Layer*>& layersInTree,
+                                          LayerVector::StateSet stateSet,
+                                          const LayerVector::Visitor& visitor) {
@@ -117666 +1268,2 @@ std::vector<Layer*> Layer::getLayersInTree(LayerVector::StateSet stateSet) {
-void Layer::traverseChildrenInZOrder(LayerVector::StateSet stateSet, const LayerVector::Visitor& visitor) {
+void Layer::traverseChildrenInZOrder(LayerVector::StateSet stateSet,
+                                     const LayerVector::Visitor& visitor) {
@@ -117782,0 +1386,20 @@ void Layer::writeToProto(LayerProto* layerInfo, LayerVector::StateSet stateSet)
+void Layer::writeToProto(LayerProto* layerInfo, int32_t displayId) {
+    if (!hasHwcLayer(displayId)) {
+        return;
+    }
+    writeToProto(layerInfo, LayerVector::StateSet::Drawing);
+    const auto& hwcInfo = getBE().mHwcLayers.at(displayId);
+    const Rect& frame = hwcInfo.displayFrame;
+    LayerProtoHelper::writeToProto(frame, layerInfo->mutable_hwc_frame());
+    const FloatRect& crop = hwcInfo.sourceCrop;
+    LayerProtoHelper::writeToProto(crop, layerInfo->mutable_hwc_crop());
+    const int32_t transform = static_cast<int32_t>(hwcInfo.transform);
+    layerInfo->set_hwc_transform(transform);
+    const int32_t compositionType = static_cast<int32_t>(hwcInfo.compositionType);
+    layerInfo->set_hwc_composition_type(compositionType);
+    if (std::strcmp(getTypeId(), "BufferLayer") == 0 &&
+        static_cast<BufferLayer*>(this)->isProtected()) {
+        layerInfo->set_is_protected(true);
+    } else {
+        layerInfo->set_is_protected(false);
+    }
@@ -117783,0 +1407,7 @@ void Layer::writeToProto(LayerProto* layerInfo, LayerVector::StateSet stateSet)
+};
+#if defined(__gl_h_)
+#error "don't include gl/gl.h in this file"
+#endif
+#if defined(__gl2_h_)
+#error "don't include gl2/gl2.h in this file"
+#endif
