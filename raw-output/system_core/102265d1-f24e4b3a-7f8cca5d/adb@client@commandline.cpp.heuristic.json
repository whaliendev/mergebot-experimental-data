[
  {
    "code": [
      "static bool _is_valid_os_fd(int fd) {",
      "    // Disallow invalid FDs and stdin/out/err as well.",
      "    if (fd < 3) {",
      "        return false;",
      "    }",
      "#ifdef _WIN32",
      "    auto handle = (HANDLE)fd;",
      "    DWORD info = 0;",
      "    if (GetHandleInformation(handle, &info) == 0) {",
      "        return false;",
      "    }",
      "#else",
      "    int flags = fcntl(fd, F_GETFD);",
      "    if (flags == -1) {",
      "        return false;",
      "    }",
      "#endif",
      "    return true;",
      "}",
      "static bool _is_valid_fd(int fd) {",
      "    // Disallow invalid FDs and stdin/out/err as well.",
      "    if (fd < 3) {",
      "        return false;",
      "    }",
      "#ifdef _WIN32",
      "    HANDLE handle = adb_get_os_handle(fd);",
      "    DWORD info = 0;",
      "    if (GetHandleInformation(handle, &info) == 0) {",
      "        return false;",
      "    }",
      "#else",
      "    int flags = fcntl(fd, F_GETFD);",
      "    if (flags == -1) {",
      "        return false;",
      "    }",
      "#endif",
      "    return true;",
      "}"
    ],
    "label": "",
    "index": 0,
    "confidence": 0.4,
    "desc": "List merge."
  }
]