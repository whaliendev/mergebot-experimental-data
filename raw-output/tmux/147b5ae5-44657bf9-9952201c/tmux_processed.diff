--- a/output/tmux/147b5ae5-44657bf9-9952201c/tmux.no_comments_mergebot.h
+++ b/output/tmux/147b5ae5-44657bf9-9952201c/tmux.no_comments_truth.h
@@ -5,5 +4,0 @@
-#include <sys/queue.h>
-#include <sys/tree.h>
-#include <bitstring.h>
-#include <stdint.h>
-#include <imsg.h>
@@ -28,0 +24,2 @@ extern char **environ;
+#define fatal(msg) log_fatal("%s: %s", __func__, msg);
+#define fatalx(msg) log_fatalx("%s: %s", __func__, msg);
@@ -29,0 +27 @@ extern char **environ;
+#define printflike(a,b) __attribute__ ((format (printf, a, b)))
@@ -43,0 +42,10 @@ extern char **environ;
+#define KEYC_IS_MOUSE(key) (((key) & KEYC_MASK_KEY) >= KEYC_MOUSE && \
+    ((key) & KEYC_MASK_KEY) < KEYC_BSPACE)
+#define KEYC_MOUSE_KEY(name) \
+ KEYC_ ## name ## _PANE, \
+ KEYC_ ## name ## _STATUS, \
+ KEYC_ ## name ## _BORDER
+#define KEYC_MOUSE_STRING(name,s) \
+ { #s "Pane", KEYC_ ## name ## _PANE }, \
+ { #s "Status", KEYC_ ## name ## _STATUS }, \
+ { #s "Border", KEYC_ ## name ## _BORDER }
@@ -213,0 +468 @@ struct mode_key_binding {
+RB_HEAD(mode_key_tree, mode_key_binding);
@@ -256,9 +511,7 @@ struct utf8_data {
-struct grid_line {
- u_int cellsize;
- struct grid_cell *celldata;
- int flags;
-} __packed;
-struct grid_line {
- u_int cellsize;
- struct grid_cell *celldata;
- int flags;
+struct grid_cell {
+ u_char attr;
+ u_char flags;
+ u_char fg;
+ u_char bg;
+ u_char xstate;
+ u_char xdata[UTF8_SIZE];
@@ -307,0 +561 @@ struct job {
+LIST_HEAD(joblist, job);
@@ -339,0 +594,4 @@ struct screen_write_ctx {
+#define screen_size_x(s) ((s)->grid->sx)
+#define screen_size_y(s) ((s)->grid->sy)
+#define screen_hsize(s) ((s)->grid->hsize)
+#define screen_hlimit(s) ((s)->grid->hlimit)
@@ -407,4 +665,2 @@ struct window_pane {
-                       RB_ENTRY(window_pane)
-                       tree_entry;
-                       RB_ENTRY(window_pane)
-                       RB_ENTRY(window_pane)
+ TAILQ_ENTRY(window_pane) entry;
+ RB_ENTRY(window_pane) tree_entry;
@@ -411,0 +668,2 @@ struct window_pane {
+TAILQ_HEAD(window_panes, window_pane);
+RB_HEAD(window_pane_tree, window_pane);
@@ -441,0 +700 @@ struct window {
+RB_HEAD(windows, window);
@@ -455,0 +715,2 @@ struct winlink {
+RB_HEAD(winlinks, winlink);
+TAILQ_HEAD(winlink_stack, winlink);
@@ -458,0 +722 @@ LAYOUT_LEFTRIGHT,LAYOUT_TOPBOTTOM, LAYOUT_WINDOWPANE
+TAILQ_HEAD(layout_cells, layout_cell);
@@ -473,3 +737 @@ struct environ_entry {
-                         entry;
-                         entry;
-                         entry;
+ RB_ENTRY(environ_entry) entry;
@@ -476,0 +739 @@ struct environ_entry {
+RB_HEAD(environ, environ_entry);
@@ -480,0 +744 @@ TAILQ_ENTRY(session_group) entry;
+TAILQ_HEAD(session_groups, session_group);
@@ -502,2 +766 @@ struct session {
- RB_ENTRY(session) entry;
- RB_ENTRY(session) entry;
+ TAILQ_ENTRY(session) gentry;
@@ -505,0 +769 @@ struct session {
+RB_HEAD(sessions, session);
@@ -513,0 +778,4 @@ struct session {
+#define MOUSE_BUTTONS(b) ((b) & MOUSE_MASK_BUTTONS)
+#define MOUSE_WHEEL(b) ((b) & MOUSE_MASK_WHEEL)
+#define MOUSE_DRAG(b) ((b) & MOUSE_MASK_DRAG)
+#define MOUSE_RELEASE(b) (((b) & MOUSE_MASK_BUTTONS) == 3)
@@ -541 +809 @@ struct tty_term {
- LIST_ENTRY(tty_term) entry;
+ char acs[UCHAR_MAX + 1][2];
@@ -547,0 +816 @@ struct tty_term {
+LIST_HEAD(tty_terms, tty_term);
@@ -672,0 +942 @@ TAILQ_HEAD(, message_entry) message_log;
+TAILQ_HEAD(clients, client);
@@ -673,0 +944 @@ struct args_entry;
+RB_HEAD(args_tree, args_entry);
@@ -690,0 +962 @@ struct cmd_list {
+};
@@ -698,0 +974 @@ struct cmd_q_item {
+TAILQ_HEAD(cmd_q_items, cmd_q_item);
@@ -730,3 +1006 @@ struct key_binding {
-                        entry;
-                        entry;
-                        entry;
+ RB_ENTRY(key_binding) entry;
@@ -733,0 +1008 @@ struct key_binding {
+RB_HEAD(key_bindings, key_binding);
@@ -739,0 +1015 @@ struct key_table {
+RB_HEAD(key_tables, key_table);
@@ -762,8 +1045,8 @@ struct options_table_entry {
-struct options *global_options;
-struct options *global_s_options;
-struct options *global_w_options;
-struct environ global_environ;
-char *shell_cmd;
-int debug_level;
-time_t start_time;
-char socket_path[PATH_MAX];
+extern struct options *global_options;
+extern struct options *global_s_options;
+extern struct options *global_w_options;
+extern struct environ global_environ;
+extern char *shell_cmd;
+extern int debug_level;
+extern time_t start_time;
+extern char socket_path[PATH_MAX];
@@ -831,0 +1115 @@ int mode_key_cmp(struct mode_key_binding *, struct mode_key_binding *);
+RB_PROTOTYPE(mode_key_tree, mode_key_binding, entry, mode_key_cmp);
@@ -881,0 +1166 @@ int environ_cmp(struct environ_entry *, struct environ_entry *);
+RB_PROTOTYPE(environ, environ_entry, entry, environ_cmp);
@@ -966,0 +1252 @@ int args_cmp(struct args_entry *, struct args_entry *);
+RB_PROTOTYPE(args_tree, args_entry, entry, args_cmp);
@@ -1022,0 +1309,2 @@ int client_main(struct event_base *, int, char **, int);
+RB_PROTOTYPE(key_bindings, key_binding, entry, key_bindings_cmp);
+RB_PROTOTYPE(key_tables, key_table, entry, key_table_cmp);
@@ -1039,4 +1327,4 @@ extern struct tmuxproc *server_proc;
-struct clients clients;
-struct session *marked_session;
-struct winlink *marked_winlink;
-struct window_pane *marked_window_pane;
+extern struct clients clients;
+extern struct session *marked_session;
+extern struct winlink *marked_winlink;
+extern struct window_pane *marked_window_pane;
@@ -1224,0 +1513 @@ int window_cmp(struct window *, struct window *);
+RB_PROTOTYPE(windows, window, entry, window_cmp);
@@ -1225,0 +1515 @@ int winlink_cmp(struct winlink *, struct winlink *);
+RB_PROTOTYPE(winlinks, winlink, entry, winlink_cmp);
@@ -1226,0 +1517 @@ int window_pane_cmp(struct window_pane *, struct window_pane *);
+RB_PROTOTYPE(window_pane_tree, window_pane, tree_entry, window_pane_cmp);
@@ -1381,0 +1673 @@ int session_cmp(struct session *, struct session *);
+RB_PROTOTYPE(sessions, session, entry, session_cmp);
