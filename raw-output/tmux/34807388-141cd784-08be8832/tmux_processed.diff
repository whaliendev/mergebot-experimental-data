--- a/output/tmux/34807388-141cd784-08be8832/tmux.no_comments_mergebot.h
+++ b/output/tmux/34807388-141cd784-08be8832/tmux.no_comments_truth.h
@@ -4,5 +3,0 @@
-#include <sys/queue.h>
-#include <sys/tree.h>
-#include <bitstring.h>
-#include <stdint.h>
-#include <event.h>
@@ -75,0 +71 @@ struct winlink;
+#define printflike(a,b) __attribute__ ((format (printf, a, b)))
@@ -104,0 +101,9 @@ struct winlink;
+#define KEYC_IS_MOUSE(key) \
+ (((key) & KEYC_MASK_KEY) >= KEYC_MOUSE && \
+  ((key) & KEYC_MASK_KEY) < KEYC_BSPACE)
+#define KEYC_IS_UNICODE(key) \
+ (((key) & KEYC_MASK_KEY) > 0x7f && \
+  (((key) & KEYC_MASK_KEY) < KEYC_BASE || \
+   ((key) & KEYC_MASK_KEY) >= KEYC_BASE_END) && \
+  (((key) & KEYC_MASK_KEY) < KEYC_USER || \
+   ((key) & KEYC_MASK_KEY) >= KEYC_USER_END))
@@ -105,0 +111,14 @@ struct winlink;
+#define KEYC_MOUSE_KEY(name) \
+ KEYC_ ## name ## _PANE, \
+ KEYC_ ## name ## _STATUS, \
+ KEYC_ ## name ## _STATUS_LEFT, \
+ KEYC_ ## name ## _STATUS_RIGHT, \
+ KEYC_ ## name ## _STATUS_DEFAULT, \
+ KEYC_ ## name ## _BORDER
+#define KEYC_MOUSE_STRING(name,s) \
+ { #s "Pane", KEYC_ ## name ## _PANE }, \
+ { #s "Status", KEYC_ ## name ## _STATUS }, \
+ { #s "StatusLeft", KEYC_ ## name ## _STATUS_LEFT }, \
+ { #s "StatusRight", KEYC_ ## name ## _STATUS_RIGHT }, \
+ { #s "StatusDefault", KEYC_ ## name ## _STATUS_DEFAULT }, \
+ { #s "Border", KEYC_ ## name ## _BORDER }
@@ -273,0 +557 @@ UTF8_MORE,UTF8_DONE, UTF8_ERROR
+#define COLOUR_DEFAULT(c) ((c) == 8 || (c) == 9)
@@ -342,22 +626,3 @@ struct grid_cell {
-struct grid_cell_entry {
- union {
-  u_int offset;
-  struct {
-   u_char attr;
-   u_char fg;
-   u_char bg;
-   u_char data;
-  } data;
- };
- u_char flags;
-} __packed;
-struct grid_cell_entry {
- union {
-  u_int offset;
-  struct {
-   u_char attr;
-   u_char fg;
-   u_char bg;
-   u_char data;
-  } data;
- };
+struct grid_extd_entry {
+ utf8_char data;
+ u_short attr;
@@ -364,0 +630,4 @@ struct grid_cell_entry {
+ int fg;
+ int bg;
+ int us;
+ u_int link;
@@ -417,0 +702 @@ u_int end;
+TAILQ_HEAD(style_ranges, style_range);
@@ -517,0 +819,4 @@ struct screen_redraw_ctx {
+#define screen_size_x(s) ((s)->grid->sx)
+#define screen_size_y(s) ((s)->grid->sy)
+#define screen_hsize(s) ((s)->grid->hsize)
+#define screen_hlimit(s) ((s)->grid->hlimit)
@@ -567,0 +873 @@ TAILQ_ENTRY(window_pane_resize) entry;
+TAILQ_HEAD(window_pane_resizes, window_pane_resize);
@@ -624,6 +930,3 @@ struct window_pane {
-                       tree_entry;
-                       tree_entry;
-                    entry;
-                       tree_entry;
-                       tree_entry;
-                       tree_entry;
+ TAILQ_ENTRY(window_pane) entry;
+ TAILQ_ENTRY(window_pane) sentry;
+ RB_ENTRY(window_pane) tree_entry;
@@ -630,0 +934,2 @@ struct window_pane {
+TAILQ_HEAD(window_panes, window_pane);
+RB_HEAD(window_pane_tree, window_pane);
@@ -670,0 +976,3 @@ struct window {
+ RB_ENTRY(window) entry;
+};
+RB_HEAD(windows, window);
@@ -681 +989 @@ struct winlink {
- TAILQ_ENTRY(winlink) sentry;
+ RB_ENTRY(winlink) entry;
@@ -684,0 +993,2 @@ struct winlink {
+RB_HEAD(winlinks, winlink);
+TAILQ_HEAD(winlink_stack, winlink);
@@ -694,0 +1007 @@ LAYOUT_LEFTRIGHT,LAYOUT_TOPBOTTOM, LAYOUT_WINDOWPANE
+TAILQ_HEAD(layout_cells, layout_cell);
@@ -711,3 +1024 @@ struct environ_entry {
-                         entry;
-                         entry;
-                         entry;
+ RB_ENTRY(environ_entry) entry;
@@ -718,3 +1029 @@ struct session_group {
-                          entry;
-                          entry;
-                          entry;
+ RB_ENTRY(session_group) entry;
@@ -721,0 +1031 @@ struct session_group {
+RB_HEAD(session_groups, session_group);
@@ -744,2 +1054 @@ struct session {
- RB_ENTRY(session) entry;
- RB_ENTRY(session) entry;
+ TAILQ_ENTRY(session) gentry;
@@ -747,0 +1057 @@ struct session {
+RB_HEAD(sessions, session);
@@ -764,0 +1075,6 @@ struct session {
+#define MOUSE_BUTTONS(b) ((b) & MOUSE_MASK_BUTTONS)
+#define MOUSE_WHEEL(b) \
+ (((b) & MOUSE_MASK_BUTTONS) == MOUSE_WHEEL_UP || \
+  ((b) & MOUSE_MASK_BUTTONS) == MOUSE_WHEEL_DOWN)
+#define MOUSE_DRAG(b) ((b) & MOUSE_MASK_DRAG)
+#define MOUSE_RELEASE(b) (((b) & MOUSE_MASK_BUTTONS) == 3)
@@ -793 +1109 @@ struct tty_term {
- LIST_ENTRY(tty_term) entry;
+ char acs[UCHAR_MAX + 1][2];
@@ -804,0 +1121 @@ struct tty_term {
+LIST_HEAD(tty_terms, tty_term);
@@ -903,0 +1221 @@ struct message_entry {
+TAILQ_HEAD(message_list, message_entry);
@@ -916,0 +1237 @@ struct args_entry;
+RB_HEAD(args_tree, args_entry);
@@ -1033,0 +1369 @@ struct client_file {
+RB_HEAD(client_files, client_file);
@@ -1040,0 +1377 @@ struct client_window {
+RB_HEAD(client_windows, client_window);
@@ -1200,0 +1538 @@ struct client {
+TAILQ_HEAD(clients, client);
@@ -1211,0 +1554 @@ struct key_binding {
+RB_HEAD(key_bindings, key_binding);
@@ -1218,0 +1562,2 @@ struct key_table {
+RB_HEAD(key_tables, key_table);
+RB_HEAD(options_array, options_array_item);
@@ -1768,0 +2120 @@ struct cmdq_item *cmdq_get_command(struct cmd_list *, struct cmdq_state *);
+#define cmdq_get_callback(cb,data) cmdq_get_callback1(#cb, cb, data)
@@ -1807,0 +2160 @@ int file_cmp(struct client_file *, struct client_file *);
+RB_PROTOTYPE(client_files, client_file, entry, file_cmp);
@@ -1837,5 +2190,5 @@ void file_read_cancel(struct client_files *, struct imsg *);
-struct tmuxproc *server_proc;
-struct clients clients;
-struct cmd_find_state marked_pane;
-struct message_list message_log;
-time_t current_time;
+extern struct tmuxproc *server_proc;
+extern struct clients clients;
+extern struct cmd_find_state marked_pane;
+extern struct message_list message_log;
+extern time_t current_time;
@@ -1853,0 +2207 @@ int server_create_socket(uint64_t, char **);
+RB_PROTOTYPE(client_windows, client_window, entry, server_client_window_cmp);
@@ -2146,0 +2501 @@ int window_cmp(struct window *, struct window *);
+RB_PROTOTYPE(windows, window, entry, window_cmp);
@@ -2147,0 +2503 @@ int winlink_cmp(struct winlink *, struct winlink *);
+RB_PROTOTYPE(winlinks, winlink, entry, winlink_cmp);
@@ -2148,0 +2505 @@ int window_pane_cmp(struct window_pane *, struct window_pane *);
+RB_PROTOTYPE(window_pane_tree, window_pane, tree_entry, window_pane_cmp);
@@ -2364,0 +2722 @@ int session_cmp(struct session *, struct session *);
+RB_PROTOTYPE(sessions, session, entry, session_cmp);
